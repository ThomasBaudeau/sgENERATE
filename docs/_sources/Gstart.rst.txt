Getting Started
================

For installation see `Installing <https://thomasbaudeau.github.io/sgENERATE/installing.html>`_ documentation.

Quick run:
~~~~~~~~~~~

simple run : ::

   sgENERATE


quick run (low coverage) : ::

   sgENERATE --coverage 100 

Option:
~~~~~~~~~~~~~~~ 

command option :
 
* ``-h`` or ``--help`` The help page in command line.
* ``--coverage``. The coverage of the generated sample. The default value is ``--coverage 5000``. 
* ``--error`` The mean error rate of the generated sample. The default value is ``--error 0.95`` (5% mean error rate) .
* ``--compare`` Option to enable comparison between periscope and periscope_multi. The default value is ``--compare True``.If the user only wants to generate a sample use ``--false`` 
* ``--real`` Option to enable the comparison between periscope and periscope_multi on a provided dataset (does not generate a synthetic dataset). The default value is ``--real False``
* ``--fastq`` path to provided sample 

Options details:
------------------


* ``--coverage``. The coverage of the generated sample. The default value is ``--coverage 5000``. 

exemple : ::

   sgENERATE --coverage 1000 

.. NOTE::

   Value bigger than **99** expected

* ``--error`` The mean error rate of the generated sample. The default value is ``--error 0.95`` (5% mean error rate) . 

exemple : ::

   sgENERATE --error 0.85

.. NOTE::

   Value are expected between **0.70** and  **0.96**. The generation is based on `pbsim2 <https://github.com/yukiteruono/pbsim2>`_ and the method does not handle reads with an accurate greater than 4%.


* ``--compare`` Option to enable comparison between periscope and periscope_multi. The default value is ``--compare True``.If the user only wants to generate a sample use --false 

exemple : ::

   sgENERATE --compare False

.. NOTE::

   Value bigger than **99** expected
   
* ``--real`` Option to enable the comparison between periscope and periscope_multi on a provided dataset (does not generate a synthetic dataset). The default value is ``--real False``

exemple : ::

   sgENERATE --real True

.. NOTE::

   The option ``--fastq`` **must** be used with ``--fastq`` to indicate the path of the provided file

   
* ``--fastq`` path to provided sample 

exemple : ::

   sgENERATE --fastq PATH/tofile.fastq

.. NOTE::

   The ``--fastq`` option **must** be used with ``--fastq`` to indicate the path of the supplied file.


Other option:
~~~~~~~~~~~~~~~ 

.. WARNING::

   These options have been designed to allow further testing during the paper writing process. They will not be maintained in future developments and may no longer work.

* ``--tool`` option enabling the comparison with other mappers for periscope_multi (graphmap, bwa-mem or minimap2 with refined parameters)
* ``--technology`` option enabling the comparison with other mappers on illumina data (``--technology illumina``)
* ``--mode`` option to extract all non canonical sgRNA in ``result/non_COV_cano.fasta`` use ``--mode extraction``


Output:
~~~~~~~~

Using sgENERATE results in the creation of 4 output folders. 

Periscope folder
------------------

This folder contains 3 files, all from the `periscope <https://github.com/sheffield-bioinformatics-core/periscope>`_ output files:

*  **COV_periscope_counts.csv** The counts of genomic, sub-genomic and normalisation values for known ORFs
*  **COV_periscope_novel_counts.csv** The counts of genomic, sub-genomic and normalisation values for non-canonical ORFs
*  **COV_periscope.bam** This is the original input bam file and index created by periscope with the reads specified in the fastq-dir. This file, however, has tags which represent the results of periscope

Periscope_multi folder
------------------------

This folder contains 3 files, all from the `periscope_multifasta <https://github.com/ThomasBaudeau/periscope_multifasta>`_ output files:

*  **COV_periscope_counts.csv** The counts of genomic, sub-genomic and normalisation values for known ORFs
*  **COV_periscope_novel_counts.csv** The counts of genomic, sub-genomic and normalisation values for non-canonical ORFs
*  **COV_periscope.bam** This is the original input bam file and index created by periscope with the reads specified in the fastq-dir. This file, however, has tags which represent the results of periscope

result
-------

This folder contains 2 folders and 5 files.

*  **COV_nbread.txt** file containing the number of reads generated
*  **COV_multifastq.faa** files of possible generated amplicons 
*  **final_COV_agregate.fastq** fastq files of the sample generated by pbsim2
*  **final_COV_proportion.txt** files containing information on the number of sgRNAs present in the generated samples
*  **final_COV_SG_ER.pdf** Figure summarizing the results of the two tools, contains a barplot and a veen diagram.

For the forlders:

*  **pbsim2 folder** contains a fastq file for each amplicon generated 
*  **sg_ref_COV folder** contains fasta files for each possible sgRNA




